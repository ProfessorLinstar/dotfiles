################################################################################
# Program: ~/.tmux.conf
# Description: Tmux configuration file.
# Modified files: .../.tmux/plugins/tmux-resurrect/nvim_session.sh : See 'Plugins' for details
################################################################################

################################################################################
# Bindings
################################################################################

bind r source-file ~/.tmux.conf \; display-message "Config reloaded..."

bind C-a choose-tree
bind -n M-h select-pane -L
bind -n M-j select-pane -D
bind -n M-k select-pane -U
bind -n M-l select-pane -R

bind -n M-H previous-window
bind -n M-L next-window
bind -n C-M-H swap-window -t -1 \; previous-window
bind -n C-M-L swap-window -t +1 \; next-window

bind v split-window -h
bind s split-window -v
bind , command-prompt "rename-window '%%'"
bind c command-prompt -p "window name:" "new-window; rename-window '%%'"
bind -n M-z resize-pane -Z
bind -n M-R run "tmux list-panes -s -F '##{session_name}:##{window_index}.##{pane_index}' | xargs -I PANE tmux rotate-window -Z -t PANE"

bind -T copy-mode-vi r send-keys -X rectangle-toggle
bind -n M-[ copy-mode
bind -n M-] paste-buffer

################################################################################
# Settings
################################################################################

set -g default-terminal "screen-256color" # Prevent tmux from overriding terminal color settings

set-window-option -g allow-rename off # Don't automatically change window title
set-option -g set-titles on           # Manually specify title
setw -g monitor-activity off          # prevent updates to shell from changing window titles

set -sg escape-time 0 # disable escape key delay when using vim in tmux
set -g mouse on       # enable mouse support

setw -g mode-keys vi  # Use vim navigation in copy mode
set -g status-keys vi # Use vim navigation in status bar

################################################################################
# Theme
################################################################################

# Colors:
#        Yellow: c8a404
#         Black: 201c1c
#          Gray: 404040
#         White: f8f8f2
#    Light Blue: 60acfc
#   Light Green: 88d484

set -g status-style bg='#383838',fg='#f8f8f2'
set -g status-interval 1

set-window-option -g window-status-separator ''
set -g window-status-current-format "#[fg=#201c1c,bg=#88d484] #{p7:window_name} #{?window_zoomed_flag,•,━}▕"
set -g window-status-format "#[fg=#f8f8f2,bg=#383838] #{p7:window_name} #{?window_zoomed_flag,•,━}#[fg=#201c1c]▕"
set -g window-status-format "#[fg=#f8f8f2,bg=#383838] #{p7:window_name} #{?window_zoomed_flag,•,━}#[fg=#201c1c]▕"

set -g status-left '#{?client_prefix,#[bg=#c8a404],#[bg=#60acfc]} '
set -g status-right-length 80
set -g status-right 'CPU: #{cpu_percentage} RAM: #{ram_percentage} GPU: #{gpu_percentage} '
set -ga status-right '#{?client_prefix,#[fg=#201c1c]#[bg=#c8a404],#[fg=#201c1c]#[bg=#60acfc]} %Y-%m-%d %a %H:%M:%S '

################################################################################
# Plugins (keep as last section)
################################################################################

set -g @plugin 'tmux-plugins/tpm'            # package manager
set -g @plugin 'tmux-plugins/tmux-sensible'  # default settings
set -g @plugin 'tmux-plugins/tmux-resurrect' # saving/restoring tmux sessions
set -g @plugin 'tmux-plugins/tmux-continuum' # automation of saving/restoring
set -g @plugin 'tmux-plugins/tmux-cpu'       # System monitor

# enable plugin-specific settings
# To get nvim sessions to work properly, edit nvim_session.sh to use 'vis' instead of 'nvim -S'
set -g @resurrect-strategy-nvim 'session'    # restore nvim sessions
set -g @resurrect-capture-pane-contents 'on' # save and restore pane contents
set -g @continuum-restore 'on'               # auto-restore last env
set -g @continuum-boot 'on'                  # auto-restore last env

# Initialize TMUS plugin manager (keep at very bottom of .tmux.conf
run '~/.tmux/plugins/tpm/tpm'
